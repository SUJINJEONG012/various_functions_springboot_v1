<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>로그인</title>
    <link rel="stylesheet" th:href="@{/css/default.css}" />
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/content.css}" />
    <link rel="stylesheet" th:href="@{/css/button.css}" />
	<style>
		#login_box .signup_btn {background:#42d870; border:0; border-bottom:solid 3px #4ed177; border-radius:50px; width:100%; height:52px; line-height:52px; font-size:16px; color:#fff; text-align:center; margin:20px 0 15px;}
	</style>
	
</head>

<body>
	<div id="login_wrap">
		<div id="login_box">
			<div class="login_con">
				<div class="login_tit">
					<h2>게시판 프로젝트</h2>
					<p>LOG<i>IN</i></p>
				</div>

				<div class="login_input">
					<form id="loginForm" onsubmit="return false;" autocomplete="off">
						<ul>
							<li>
								<label for="loginId" class="skip_info">아이디</label>
								<input type="text" id="loginId" name="loginId" placeholder="아이디" title="아이디" />
							</li>
							<li>
								<label for="memberPw" class="skip_info">비밀번호</label>
								<input type="text" id="memberPw" name="memberPw" title="비밀번호" placeholder="비밀번호" />
							</li>
						</ul>
						<button type="button" onclick="login();" class="login_btn">로그인</button>
						<button type="button" onclick="location.href='join'" class="signup_btn">회원가입</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	

	
	<script th:src="@{/js/function.js}"></script>
	<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
	<script th:src="@{/js/common.js}"></script>
	<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>


	<script>
		window.onload = ()=>{
			document.querySelectorAll("#loginId, #memberPw").forEach(element =>{
				element.addEventListener('keyup', (e)=>{
					if(e.keycode === 13){
						login();
					}
				})	
			})
		}
		
		//로그인
		function login(){
			const form = document.getElementById("loginForm");
			// form 엘리먼트 가지고 와서 아이디와비밀번호를 입력확인
			if(!form.loginId.value || !form.memberPw.value){
				form.loginId.focus();
				return false;
			}
			$.ajax({
				url: "/member/login",
				type:"post",
				dataType: "json",
				data:{
					loginId:form.loginId.value,
					memberPw: form.memberPw.value
				},
				async:false,
				success : function(response){
					location.href='/'; // 원래주소는 게시판 리스트 볼수있는곳으로 
				},
				error : function(request, status, error){
					console.log(request);
					console.log(status);
					alert("아이디와 비밀번호를 확인해주세요.");
				}
			})
			
			
		}
	</script>
	
</body>
</html>