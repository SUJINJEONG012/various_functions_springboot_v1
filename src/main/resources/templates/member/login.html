<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>ë¡œê·¸ì¸</title>
    <link rel="stylesheet" th:href="@{/css/default.css}" />
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/content.css}" />
    <link rel="stylesheet" th:href="@{/css/button.css}" />
	<style>
	
	</style>
	
</head>

<body>

 <script th:if="${param.errorMessage}">
        alert([[${param.errorMessage}]]);
     
 </script>
    
    
	<div class="login_wrap">
		<div class="login_box">
			<div class="login_con">
				
				<div class="login_tit">
					<h2>ì—¬í–‰ì„ ë– ë‚˜ìš”ğŸ›¬ ğŸˆ</h2>
					<p>LOGIN</p>
				</div>

				<div class="login_input">
					<form id="loginForm" onsubmit="return false;" autocomplete="off">
						<ul>
							<li>
								<label for="loginId" class="skip_info">ì•„ì´ë””</label>
								<input type="text" id="loginId" name="loginId" placeholder="ì•„ì´ë””" title="ì•„ì´ë””" />
							</li>
							<li>
								<label for="memberPw" class="skip_info">ë¹„ë°€ë²ˆí˜¸</label>
								<input type="text" id="memberPw" name="memberPw" title="ë¹„ë°€ë²ˆí˜¸" placeholder="ë¹„ë°€ë²ˆí˜¸" />
							</li>
						</ul>
						<div class="login_btn_wrap">
						<button type="button" onclick="login();" class="login_btn">ë¡œê·¸ì¸</button> 
						<a href="https://kauth.kakao.com/oauth/authorize?client_id=fd9684394aef9b4670cf57a542fb05e8&redirect_uri=http://localhost:8081/auth/kakao/callback&response_type=code">
        					<img th:src="@{/images/kakao_login_medium_narrow.png}" alt="kakao login button" style="width:50%">
        				</a>
					
						</div>
							<!--<button type="button" class="login_btn" id="login_btn">ë¡œê·¸ì¸</button>-->
						<button type="button" onclick="location.href='/member/join'" class="signup_btn">íšŒì›ê°€ì…</button>
						
					</form>
				</div>
				
			</div>
		</div>
	</div>
	
	
	<script th:src="@{/js/function.js}"></script>
	<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
	<script th:src="@{/js/common.js}"></script>
	<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>
	<script>
	
	/*var loginForm = {
		    init: function() {
		        loginForm.bind();
		    },
		    bind: function() {
		        $("#login_btn").on('click', function(){
					loginForm.login();
		        });
		    },
		    login: function() {
				alert($("#memberPw").val());	
		        $.ajax({
		           url: '/member/login',
		            type: 'POST',
		            dataType: 'json',
		            data: {
		               loginId: $("#loginId").val(),
		               memberPw: $("#memberPw").val()
		            },
		            success: function(res){
		               if(res.code=='200'){
		                   alert("ë¡œê·¸ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤.");
		                   common.goPage("/post/list");
		               } else if(res.code != 200){
		            	   
		               }else {
		                   alert("gg : "+res.message); //undefined
		               }
		               console.log(res);
		            }
		        });
		    }
		}

		$(function(){
		   loginForm.init();
		}); */
		
		// Enter ë¡œê·¸ì¸ ì´ë²¤íŠ¸ ë°”ì¸ë”©
		window.onload = () => {
			document.querySelectorAll('#loginId, #memberPw').forEach(element => {
				element.addEventListener('keyup', (e) => {
					if (e.keyCode === 13) {
						login();
					}
				})
			})
		}


		// ë¡œê·¸ì¸
		const login = () => {
			
			const form = document.getElementById('loginForm');

			if ( !form.loginId.value || !form.memberPw.value ) {
				alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
				form.loginId.focus();
				return false;
			}

			$.ajax({
				url : '/member/login',
				type : 'POST',
				dataType : 'json',
				data : {
					loginId: form.loginId.value,
					memberPw: form.memberPw.value
				},
				async : false,
				success : function (response) {
					location.href = '/';
				},
				error : function (request, status, error) {
					alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.');
				}
			})
		}
		
		
	</script>

</body>
</html>