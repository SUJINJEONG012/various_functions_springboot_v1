<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<title>회원가입</title>
<link rel="stylesheet" th:href="@{/css/default.css}" />
<link rel="stylesheet" th:href="@{/css/common.css}" />
<link rel="stylesheet" th:href="@{/css/content.css}" />
<link rel="stylesheet" th:href="@{/css/button.css}" />
</head>

<body>

<!--	<div class="">
		<h3>회원가입</h3>
		<div class="">
			<form id="join_form" autocomplete="off" method="post">
				<table>
					<colgroup>
						<col style="width: 30%" />
						<col style="width: 30%" />
					</colgroup>
					<tbody>
						<tr>
							<th scope="row">아이디<span>필수입력</span></th>
							<td><input type="text" name="loginId" placeholder="아이디" maxlength="20" style="width: 80%;" />
								<button type="button" id="idCheckBtn" class="btns btn_st5"
									onclick="checkLoginId();" style="width: 20%; float: right">중복
									확인</button> <span class="id_input_re_1">사용 가능한 아이디입니다.</span> <span
								class="id_input_re_2">아이디가 이미 존재합니다.</span> <span
								class="final_id_ck">아이디를 입력해주세요.</span></td>
						</tr>
						<tr>
							<th scope="row">비밀번호<span class="es">필수입력</span></th>
							<td><input type="text" name="memberPw" placeholder="비밀번호"
								maxlength="30" /> <span class="final_pw_ck">비밀번호를
									입력해주세요.</span></td>

						</tr>
						<tr>
							<th scope="row">비밀번호 재입력<span class="es">필수 입력</span></th>
							<td><input type="text" name="passwordCheck"
								placeholder="비밀번호 재입력" maxlength="30" /> <span
								class="final_pwck_ck">비밀번호 확인을 입력해주세요.</span> <span
								class="pwck_input_re_1">비밀번호가 일치합니다.</span> <span
								class="pwck_input_re_2">비밀번호가 일치하지 않습니다.</span></td>
						</tr>

						<tr>
							<th scope="row">이름<span class="es">필수 입력</span></th>
							<td><input type="text" name="name" placeholder="이름"
								maxlength="10" /> <span class="final_name_ck">이름을
									입력해주세요.</span></td>
						</tr>

						<tr>
							<th scope="row">이메일<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberMail" placeholder="이메일"
								 />
								 <span class="final_mail_ck">이메일을 입력해주세요.</span> 
									
								<span class="mail_input_box_warn"></span>
								
								<div class="mail_check_wrap">
									<div class="mail_check_input_box"
										id="mail_check_input_box_false">
										<input class="mail_check_input">
									</div>
									<div class="mail_check_button">
										<span>인증번호 전송</span>
									</div>
									
									<span id="mail_check_input_box_warn"></span>
								</div>
								
								</td>
						</tr>

						<tr>
							<th scope="row">성별<span class="es">필수 입력</span></th>
							<td>
								<div class="radio_group">
									<p class="radios">
										<input type="radio" id="male" name="gender" value="M" checked />
										<label for="male">남</label><span class="check"></span>
									</p>
									<p class="radios">
										<input type="radio" id="female" name="gender" value="F" /> <label
											for="female">여</label><span class="check"></span>
									</p>
								</div>
							</td>
						</tr>

						<tr>
							<th scope="row">생년월일<span class="es">필수 입력</span></th>
							<td><input type="number" name="birthday"
								placeholder="숫자 8자리 입력" /></td>
						</tr>

						<tr class="address_wrap">
							<th>주소</th>
							<td class="address_input_1_box"><input
								class="address_input_1" name="memberAddr1" >
								<div class="address_button" onclick="execution_daum_address()">
									<span>주소 찾기</span>
								</div></td>
						</tr>

						<tr class="address_input_2_box">
							<th>상세주소</th>
							<td><input class="address_input_2" name="memberAddr2"
								> <span class="final_addr_ck">주소를
									입력해주세요.</span></td>

						</tr>

						<tr class="address_input_3_box">
							<th>상세주소</th>
							<td><input class="address_input_3" name="memberAddr3">
							<span class="final_addr_ck">주소를 입력해주세요.</span></td>
						</tr>

					</tbody>
				</table>
				<div class="join_button_wrap">
				 <input type="button" class="join_button" value="가입하기">
			</div>
			</form>
			
			
		</div>
	</div>-->
	
	
	<!--/* 회원가입 popup */-->
	<div id="signupPopup" class="">
		<h3>회원가입</h3>
		<div class="pop_container">
			<form id="signupForm" onsubmit="return false;" autocomplete="off">
				<table class="tb tb_row tl">
					<colgroup>
						<col style="width:30%;" /><col style="width:70%;" />
					</colgroup>
					<tbody>
						<tr>
							<th scope="row">아이디<span class="es">필수 입력</span></th>
							<td>
								<input type="text" name="loginId" placeholder="아이디" maxlength="20" style="width: 80%;" />
								<button type="button" id="idCheckBtn" class="btns btn_st5" onclick="checkLoginId();" style="width: 20%; float: right;">중복 확인</button>
							</td>
						</tr>
						<tr>
							<th scope="row">비밀번호<span class="es">필수 입력</span></th>
							<td><input type="password" name="memberPw" placeholder="비밀번호" maxlength="30" /></td>
						</tr>
						<!--<tr>
							<th scope="row">비밀번호 재입력<span class="es">필수 입력</span></th>
							<td><input type="password" name="passwordCheck" placeholder="비밀번호 재입력" maxlength="30" /></td>
						</tr>-->
						<tr>
							<th scope="row">이름<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberName" placeholder="이름" maxlength="10" /></td>
						</tr>
						<tr>
							<th scope="row">메일<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberMail" placeholder="이름" maxlength="10" /></td>
						</tr>
						<tr>
							<th scope="row">성별<span class="es">필수 입력</span></th>
							<td>
								<div class="radio_group">
									<p class="radios">
										<input type="radio" id="male" name="gender" value="M" checked />
										<label for="male">남</label><span class="check"></span>
									</p>
									<p class="radios">
										<input type="radio" id="female" name="gender" value="F" />
										<label for="female">여</label><span class="check"></span>
									</p>
								</div>
							</td>
						</tr>
						<tr>
							<th scope="row">생년월일<span class="es">필수 입력</span></th>
							<td><input type="number" name="birthday" placeholder="숫자 8자리 입력" /></td>
						</tr>
						<tr>
							<th scope="row">주소1<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberAddr1" placeholder="" /></td>
						</tr>
						<tr>
							<th scope="row">주소2<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberAddr2" placeholder="" /></td>
						</tr>
						<tr>
							<th scope="row">주소3<span class="es">필수 입력</span></th>
							<td><input type="text" name="memberAddr3" placeholder="" /></td>
						</tr>
					</tbody>
				</table>
			</form>
			<p class="btn_set">
				<button type="button" class="btns btn_st2" onclick="saveMember();">가입</button>
				<button type="button" class="btns btn_bdr2" onclick="closeSignupPopup();">취소</button>
			</p>
		</div>
		<button type="button" class="btn_close" onclick="closeSignupPopup();"><span><i class="far fa-times-circle"></i></span></button>
	</div>


	<script th:src="@{/js/function.js}"></script>
	<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
	<script th:src="@{/js/common.js}"></script>
	<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>
	<script>
		/*$(document).ready(function() {
			//회원가입 버튼 (회원가입 기능 작동)
			$(".join_button").click(function() {
				alert("클릭버튼");
				$("#join_form").attr("action", "/member/join");
				$("#join_form").submit();
			});
		}); 
		*/
		/*
		document.addEventListener("DOMContentLoaded", () => {
			document.querySelector(".join_button").addEventListener("click", () => {
			document.querySelector("#join_form").action = "/member/join";
			document.querySelector("#join_form").submit();
		});
		});*/


		// 회원 정보 유효성 검사
		function validationMemberInfo(form) {

			const fields = form.querySelectorAll('input:not([type="radio"])');
			const fieldNames = ['아이디', '비밀번호', '이름', '생년월일'];

			for (let i = 0, len = fields.length; i < len; i++) {
				isValid(fields[i], fieldNames[i]);
			}

		}
		
		
		// 회원 정보 저장 (회원가입)
		function saveMember() {

			// 1. 필드 유효성 검사
			const form = document.getElementById('signupForm');
			validationMemberInfo(form);

			// 2. 파라미터 세팅
			const params = {}
			new FormData(form).forEach((value, key) => params[key] = value.trim());
			params.birthday = params.birthday.replace(/(\d{4})(\d{2})(\d{2})/g, '$1-$2-$3');

			// 3. Save API 호출
			callApi('/member/join', 'post', params);
			alert('가입을 축하드립니다!\n로그인 후 서비스를 이용해 주세요.');
			
		}

		
		
		
		
	</script>
</body>
</html>